<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Save the Amazon</title>

    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="TestCSS1.css">
    <link rel="stylesheet" type="text/css" href="Login.css">

    <div class="topnav">
      <input id="search" type="text" placeholder="Search...">
      <p id="search-results"></p>
      <a href="GetInvolved.html">Get Involved</a>
      <a class="active" href="OurStories.html">Our Stories</a>
      <a href="OurExperts.html">Our Experts</a>
      <a href="OurWork.html">Our Work</a>
      <a href="Index.html">Home</a>
      <img src="amazonrainforestsociety_logo.png" alt="Amazon Rainforest Society Logo" height="35" width="155">
</div>


</head>

<body>
  <br><br><br><br>

<h1><center><bold> Sign Up </bold></center></h1>

  <br>
    <form id="signup-form">

      <div class="container">
        <label for="username">
        </label>
        <input type="text" placeholder="Username" id="username" required size="20" maxlength="20">

        <label for="username">
        </label>
        <input type="text" placeholder="First Name" id="fname" required size="30" maxlength="30">

         <label for="username">
        </label>
        <input type="text" placeholder="Last Name" id="lname" required size="30" maxlength="30">

         <label for="username">
        </label>
        <input type="email" placeholder="E-mail" id="email" required size="130" maxlength="30">

        <label for="password"></label>
        <input type="password" placeholder="Password" id="password" required>

        <button type="submit" id="form1">Sign up</button>
        <label>
          <input type="checkbox" checked="checked" name="remember"> Remember me
        </label>
        <p><button type="button" class="cancelbutton">Cancel</button>
        <span class="password">Forgot <a href="#">password?</a></span></p>

      </div>
    </form>
</div>

<script type="text/javascript">
  const form1 = document.getElementById("signup-form");
  form1.addEventListener("submit", (e)=>{
    e.preventDefault();

    const request = new XMLHttpRequest()
    request.open("post", "/signup");
    request.onload = function(){
    const json = JSON.parse(request.response);
    if (json.success){
      window.alert("Success!")
      window.location.href = 'login.html';
    }
    else{
      window.alert("USER EXISTS");
    }
  }
  var data = {
    email: document.getElementById("email").value,
    username: document.getElementById("username").value,
    password: document.getElementById("password").value
  }
  request.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
  request.send(JSON.stringify(data));
  })

</script>


</body>

</html>